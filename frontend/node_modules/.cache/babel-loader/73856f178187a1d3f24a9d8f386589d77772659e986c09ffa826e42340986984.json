{"ast":null,"code":"import React,{useEffect,useState}from'react';import{api}from'../../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductosPage(_ref){let{categoria}=_ref;const[productos,setProductos]=useState([]);const[filtroPrecio,setFiltroPrecio]=useState('todos');useEffect(()=>{fetch('http://localhost:3001/api/productos').then(res=>res.json()).then(data=>{let lista=data;if(categoria)lista=lista.filter(p=>p.categoria===categoria);if(filtroPrecio==='0-100'){lista=lista.filter(p=>p.precio<=100);}else if(filtroPrecio==='100-200'){lista=lista.filter(p=>p.precio>100&&p.precio<=200);}else if(filtroPrecio==='200-300'){lista=lista.filter(p=>p.precio>200&&p.precio<=300);}setProductos(lista);}).catch(err=>console.error('Error productos:',err));},[categoria,filtroPrecio]);// Aquí defines la función\nconst addToCart=prod=>{const actual=JSON.parse(localStorage.getItem('carrito')||'[]');actual.push(prod);localStorage.setItem('carrito',JSON.stringify(actual));alert('Producto agregado al carrito');};return/*#__PURE__*/_jsx(\"section\",{className:\"tienda\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:categoria?\"Productos \".concat(categoria):'Todos los productos'}),/*#__PURE__*/_jsx(\"div\",{className:\"filtros\",children:/*#__PURE__*/_jsxs(\"select\",{value:filtroPrecio,onChange:e=>setFiltroPrecio(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"todos\",children:\"Todos los precios\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0-100\",children:\"Q0 - Q100\"}),/*#__PURE__*/_jsx(\"option\",{value:\"100-200\",children:\"Q100 - Q200\"}),/*#__PURE__*/_jsx(\"option\",{value:\"200-300\",children:\"Q200 - Q300\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"productos-grid\",children:productos.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No hay productos\"}):productos.map(prod=>/*#__PURE__*/_jsxs(\"div\",{className:\"producto-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:3001/public/\".concat(prod.imagen),alt:prod.nombre,onError:e=>{e.currentTarget.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23ecf0f1%22 width=%22200%22 height=%22200%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%2395a5a6%22%3EImagen%3C/text%3E%3C/svg%3E';}}),/*#__PURE__*/_jsx(\"span\",{className:\"categoria\",children:prod.categoria}),/*#__PURE__*/_jsx(\"h3\",{children:prod.nombre}),/*#__PURE__*/_jsx(\"p\",{children:prod.descripcion}),/*#__PURE__*/_jsxs(\"div\",{className:\"precio\",children:[\"Q\",prod.precio.toFixed(2)]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addToCart(prod),children:\"Agregar al Carrito\"})]},prod.id))})]})});}export default ProductosPage;","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","ProductosPage","_ref","categoria","productos","setProductos","filtroPrecio","setFiltroPrecio","fetch","then","res","json","data","lista","filter","p","precio","catch","err","console","error","addToCart","prod","actual","JSON","parse","localStorage","getItem","push","setItem","stringify","alert","className","children","concat","value","onChange","e","target","length","map","src","imagen","alt","nombre","onError","currentTarget","descripcion","toFixed","onClick","id"],"sources":["D:/Escritorio/PraxShopDW/frontend/src/modules/productos/ProductosPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { api } from '../../api';\r\n\r\nfunction ProductosPage({ categoria }) {\r\n  const [productos, setProductos] = useState([]);\r\n  const [filtroPrecio, setFiltroPrecio] = useState('todos');\r\n\r\n  useEffect(() => {\r\n    fetch('http://localhost:3001/api/productos')\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        let lista = data;\r\n        if (categoria) lista = lista.filter(p => p.categoria === categoria);\r\n\r\n        if (filtroPrecio === '0-100') {\r\n          lista = lista.filter(p => p.precio <= 100);\r\n        } else if (filtroPrecio === '100-200') {\r\n          lista = lista.filter(p => p.precio > 100 && p.precio <= 200);\r\n        } else if (filtroPrecio === '200-300') {\r\n          lista = lista.filter(p => p.precio > 200 && p.precio <= 300);\r\n        }\r\n        setProductos(lista);\r\n      })\r\n      .catch(err => console.error('Error productos:', err));\r\n  }, [categoria, filtroPrecio]);\r\n\r\n  // Aquí defines la función\r\n  const addToCart = (prod) => {\r\n    const actual = JSON.parse(localStorage.getItem('carrito') || '[]');\r\n    actual.push(prod);\r\n    localStorage.setItem('carrito', JSON.stringify(actual));\r\n    alert('Producto agregado al carrito');\r\n  };\r\n\r\n  return (\r\n    <section className=\"tienda\">\r\n      <div className=\"container\">\r\n        <h2>{categoria ? `Productos ${categoria}` : 'Todos los productos'}</h2>\r\n\r\n        <div className=\"filtros\">\r\n          <select value={filtroPrecio} onChange={(e) => setFiltroPrecio(e.target.value)}>\r\n            <option value=\"todos\">Todos los precios</option>\r\n            <option value=\"0-100\">Q0 - Q100</option>\r\n            <option value=\"100-200\">Q100 - Q200</option>\r\n            <option value=\"200-300\">Q200 - Q300</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"productos-grid\">\r\n          {productos.length === 0 ? (\r\n            <p>No hay productos</p>\r\n          ) : (\r\n            productos.map((prod) => (\r\n              <div key={prod.id} className=\"producto-card\">\r\n                <img\r\n                  src={`http://localhost:3001/public/${prod.imagen}`}\r\n                  alt={prod.nombre}\r\n                  onError={(e) => {\r\n                    e.currentTarget.src =\r\n                      'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23ecf0f1%22 width=%22200%22 height=%22200%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%2395a5a6%22%3EImagen%3C/text%3E%3C/svg%3E';\r\n                  }}\r\n                />\r\n                <span className=\"categoria\">{prod.categoria}</span>\r\n                <h3>{prod.nombre}</h3>\r\n                <p>{prod.descripcion}</p>\r\n                <div className=\"precio\">Q{prod.precio.toFixed(2)}</div>\r\n\r\n                {/* Aquí usas la función en el botón */}\r\n                <button onClick={() => addToCart(prod)}>\r\n                  Agregar al Carrito\r\n                </button>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default ProductosPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}